---
timezone: Asia/Shanghai
---


---

# Henry Wei

1. 自我介绍

大家好！我是一名拥有 10 年 Web 开发经验的技术经理和架构师，在多家公司中带领过团队，也主导过多个中大型项目的技术设计。写代码、解决问题、优化用户体验这些事，一直让我感到兴奋，因为我热爱创造并看到它产生实际影响。

最近，我对 Web3 领域产生了浓厚的兴趣。这个充满未知和可能性的领域让我很兴奋，也让我重新找回了刚开始学习编程时的那种好奇心。我希望未来能在这方面做一些尝试，深入探索区块链和去中心化的世界。

生活中，我喜欢和不同文化、背景的人交流，总能从他们的故事中获得灵感。我相信，每一次真诚的交流都是一次成长的机会。

我是个对未来充满信心的人，无论是面对技术还是生活中的挑战，我始终相信，只要脚踏实地，总会迎来让人惊喜的结果。期待和更多志同道合的人一起交流，共同学习！

2. 你认为你会完成本次残酷学习吗？

很高兴可以参加这次共建学习，我相信自己会坚持到第21天，加油吧！

## Notes

<!-- Content_START -->

### 2024.12.10

#### Arbitrum 入门

#### 概念

Arbitrum 是以太坊生态中比较知名的二层（Layer 2）扩容解决方案之一。其设计目标是通过`Optimistic Rollup`，在保持以太坊安全性的同时大幅提升交易吞吐量并降低交易费用。

#### 使命

1. 扩容以太坊生态

  以太坊面临着交易费用高昂、网络拥堵的问题。Arbitrum 的使命是通过在 Layer 2 执行大量计算，将结果定期提交到以太坊主链，以此缓解主网的负载压力，从而实现更高的交易吞吐量和更低的 Gas 成本。

1. 保持去中心化与安全性

  Arbitrum 以以太坊主网为安全基础层，确保 Layer 2 的状态最终性依托以太坊的共识与可信度。同时，通过优化的欺诈证明机制，Arbitrum 不需要引入额外的高信任度中介，从而保持网络的去中心化特性。

1. 增强开发者与用户体验

  Arbitrum 兼容EVM，开发者可以使用已有工具链、语言和框架，无需重构智能合约。同时，较低的交易费用和更快的结算速度，为终端用户提供更友好的交互体验，促进 DeFi、NFT、游戏、社交等 Web3 应用的落地与普及

##### 特点

- Optimistic Rollup 架构

  Arbitrum 基于 Optimistic Rollup 技术，将绝大部分交易计算和状态更新在链下完成，然后将最终结果（`状态根`）和`压缩后的交易数据`定期提交至以太坊主网，从而大幅降低链上负载。

- EVM 高兼容性：

  Arbitrum 虚拟机（AVM）在底层执行环境上与 EVM 高度兼容，开发者无需学习新语言或迁移工具链，即可快速部署和迁移合约。这大大降低了应用迁移和扩张的门槛。

- 高吞吐量与低成本：

  相较直接在以太坊主网上执行交易，Arbitrum 能够以显著更低的 Gas 费用处理更多笔交易。同时，因大部分计算在 Layer 2 侧完成，其吞吐量也得以提升。

- 欺诈证明与挑战机制

  Arbitrum 默认假设提交的状态更新是正确的，但任意验证者都可以在特定时间窗口内对可疑结果发起挑战。一旦挑战证明结果错误，作恶者的保证金会被没收，从而经济上激励所有参与者保持诚实。

- DAO 治理

  Arbitrum 通过治理代币 ARB 以及 DAO 机制，将网络升级、参数调整和资金使用的权力下放给社区，让社区成员对项目的未来发展有更直接的参与和决策权

##### 原理

1. Optimistic Rollup 工作流程

- 链下执行：绝大多数交易在 Arbitrum 的链下环境中执行，得到新的状态根

- 批量提交：将汇总后的交易数据和状态承诺（State Root）周期性写入以太坊主链。

- 乐观假设与纠错：主链对提交的数据默认视为正确，仅在出现质疑（挑战）时才要求提供欺诈证明，进而在链上运行最小范围的验证以判定正确与否。

2.欺诈证明机制（Fraud Proof）：

  当有验证者认为提交的状态更新无效时，可在指定的挑战期内发起欺诈证明。挑战过程采用`交互式多轮协议`，通过二分查找定位执行路径中的争议点。当找到确切的欺诈步骤后，链上合约会裁定胜负，并惩罚作恶者。

3.状态与数据可用性

  Arbitrum 利用以太坊链作为“数据可用性层”。所有 Rollup 所需的原始交易数据均在主网存储（以压缩方式），确保即使在挑战时，数据依旧可被取用和验证，不会因数据不可用而造成安全隐患

#### 技术架构

Arbitrum 技术架构基于`Optimistic Rollup`的理念，在以太坊主网上提供一种`高效、低成本并保持安全性`的二层（Layer 2）扩容方案。其核心思想是将绝大部分计算与状态执行移至`链下`，并只将最终经过压缩、汇总的状态根和交易数据`定期提交`到以太坊主链上，从而显著提升吞吐量并降低交易费用

##### 核心组成部分

1. Optimistic Rollup 框架

  Arbitrum 属于 Optimistic Rollup 方案，意味着它对交易的有效性采取“乐观”假设

- 默认有效性
  
  链上（L1）对提交上来的执行结果默认视为有效，不进行逐笔验证，从而避免在主链上大量消耗算力和高额费用。

- 挑战和纠错机制（Fraud Proof）

  如果有人认为提交的执行结果有问题，可在指定挑战期内发起“欺诈证明”挑战。通过在链上运行一套交互式的验证游戏，二者以二分查找的方式逐步缩小争议范围，最终由智能合约裁定谁对谁错。
  一旦挑战成功，作恶者的保证金将被没收，确保网络有充足动力维持诚实性。

2.Arbitrum 虚拟机（AVM）

  AVM 是 Arbitrum Layer 2 的执行环境，对 EVM 有高度的兼容性。这意味着智能合约开发者可以使用与以太坊相同的工具链（Solidity、Vyper 等）和开发框架（Truffle、Hardhat 等）进行部署和测试，无需大幅修改合约代码

- EVM 兼容性

  AVM 在底层指令集、Gas 计量方式和存储模型上高度兼容 EVM，使已有的合约和开发工具可轻松迁移。

- ArbOS（Arbitrum Operating System）

  AVM 顶层有一层名为 ArbOS 的系统软件，负责实现交易处理、Gas 计量、跨链消息处理和状态管理等功能，为智能合约提供更加高效和灵活的运行环境。

3.链下合约执行与链上数据提交
  
  在 Arbitrum 侧链上，交易会由验证者（Validators）或聚合器（Aggregators）来执行并得出新状态。随后，这些新状态根（State Root）和必要的交易数据以打包和压缩的形式提交到以太坊主链上。

- 状态承诺（State Commitment）

  将计算后的状态根定期上链，以太坊主链保存着这些状态的加密承诺。

- 数据可用性（Data Availability）

  Arbitrum 最初依托以太坊区块链存储 Rollup 的输入数据。确保在发生争议时，数据仍然可供验证者获得，从而进行欺诈证明。

4.验证者与挑战者角色

  Arbitrum 网络中的节点（validators）承担着监督和验证的角色。一些节点会提交状态更新，如果有节点认为更新无效，就会发起挑战。这个多方博弈关系确保了只有正确的状态才能在主链上最终定稿。

5.分步式欺诈证明

  在欺诈证明环节，Arbitrum 采用`交互式的多轮仲裁`方案，而非一次性提交所有计算步骤。在挑战中，双方通过二分法将执行轨迹逐步分解，最终锁定争议的具体指令，从而确定谁在说谎。这种多轮交互大大降低了在主链上进行整段执行验证的成本

##### 优势

- 高吞吐量与低费用
  
  通过将计算大部分移至链下执行，并在链上只提交最终结果和压缩数据，Arbitrum 显著降低了 Gas 成本并提高交易处理速度。

- 对以太坊的强安全依赖
  
  Arbitrum 在安全性上依托以太坊主网，若出现恶意状态提交，挑战机制确保最终状态的正确性。

- 易于迁移的开发生态

  对 EVM 高兼容性使智能合约开发者和现有以太坊应用可快速部署到 Arbitrum，无需从头学习新虚拟机语言或指令集

##### 总结

Arbitrum 的技术架构以 Optimistic Rollup 为基础，通过交互式欺诈证明、EVM 兼容的虚拟机环境和高效的数据压缩与上链机制，实现了在确保安全性的同时提升吞吐量、降低费用的目标。该架构为以太坊生态提供了一个可扩容、经济高效且易用的 Layer 2 解决方案，对 DeFi、NFT、游戏和各类 Web3 应用的规模化发展起到了关键作用

### 2024.12.11

<!-- Content_END -->
